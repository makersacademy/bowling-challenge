NUMBER_OF_FRAMES = 10

function Game() {
  this.framesList = [];
  this.score = 0;
}

Game.prototype.newFrame = function(firstBowl, secondBowl){
  this.checkGameOver();
  var frame = new Frame();
  frame.bowl(firstBowl, secondBowl);
  this.framesList.push(frame);
  this.calcScore(firstBowl, secondBowl);
}

Game.prototype.checkGameOver = function(){
  if (this.framesList.length >= NUMBER_OF_FRAMES) {
    throw new Error("Game has finished");
  };
}

Game.prototype.calcScore = function(firstBowl, secondBowl){
  if(this.framesList.length >= 2 && this.spareDetector()) {
    this.addSpareBonus();
  } else if (this.framesList.length >= 2 && this.strikeDetector()) {
    this.addStrikeBonus();
  }
  this.score += (firstBowl + secondBowl)
}

Game.prototype.spareDetector = function(){
  return this.framesList[this.framesList.length-2].isASpare();
}

Game.prototype.addSpareBonus = function () {
  var spareBonus = this.framesList[this.framesList.length-1].bowls[0];
  this.score += spareBonus;
};

Game.prototype.strikeDetector = function () {
  return this.framesList[this.framesList.length-2].isAStrike()
};

Game.prototype.addStrikeBonus = function () {
  var strikeBonus = (this.framesList[this.framesList.length-1].bowls[0] +
    this.framesList[this.framesList.length-1].bowls[1])
  this.score += strikeBonus
};


function Frame() {
  this.bowls = []
};

Frame.prototype.bowl = function(firstBowl, secondBowl) {
  this.bowls = [firstBowl, secondBowl];
};

Frame.prototype.isAStrike = function() {
  return this.bowls[0] === 10;
};

Frame.prototype.isASpare = function() {
  return this.bowls[0] + this.bowls[1] == 10 && !(this.isAStrike());
};

Frame.prototype.isAGutterBall = function() {
  return this.bowls[0] == 0 && this.bowls[1] == 0;
};
