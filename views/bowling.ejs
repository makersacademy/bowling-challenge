<html>
<head>
</head>
<body>
  <script src ='frame.js'></script>
  <script src ='game.js'></script>
  <script>
  // === helpers === //
  var game
  function startGame(){
    var game = new Game (Frame);
    document.getElementById("msg").innerHTML = 'Game on!';
    document.getElementById("rollSelect").style.display = 'block';
    document.getElementById("rollButton").style.display = 'block';
    showScore(game);
    document.getElementById("score").style.display = 'block';
    buildRollSelect(game);
    return game;
  }
  function showScore(game){
    document.getElementById("score").innerHTML = 'Total Score: ' + game.score();
  }
  function buildRollSelect(game){
    emptyRollSelect();
    var rollSelect = document.getElementById("rollSelect");
    var maxPermittedScore = 10 - game.currentFrame().normalScore();
    for (var i = 1; i <= maxPermittedScore; i++) {
      var el = document.createElement("option");
      el.textContent = String(i);
      el.textContent = String(i);
      rollSelect.appendChild(el);
    }
  }
  function emptyRollSelect(){
    var rollSelect = document.getElementById("rollSelect");
    var length = rollSelect.options.length
    for (i = 0; i < length; i++) {
      rollSelect.remove(rollSelect.i);
    }
  }
  function addRoll(game){
    var rollSelect = document.getElementById("rollSelect");
    var score = parseInt(rollSelect.options[rollSelect.selectedIndex].value);
    game.roll(score);
    buildRollSelect(game);
    showScore(game);
  }
  </script>
  <h1 id='msg'>Welcome to Bowling!<h1>
  <button onclick="game = startGame()">Start new game</button>
  <br>
  <select id="rollSelect" style="display:none"></select>
  <span>
    <button id="rollButton"  style="display:none" onclick="game = addRoll(game)">
      Add roll
    </button>
  </span>
  <h1 id=score style="display:none">Total Score: Not Started</h1>
</body>
</html>
